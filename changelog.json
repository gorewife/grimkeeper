[
    {
        "version": "1.8.0",
        "title": "üé® Stats Cards v2, Custom Admin Roles, & Translations",
        "features": [
            "‚Ä¢ **New**: Stats cards v2",
            "‚Ä¢ **New**: HTML/CSS rendering with Playwright",
            "‚Ä¢ **New**: `/setadmin` - Custom admin roles per server",
            "‚Ä¢ **New**: Spanish and Russian translation (use `/language`)",
            "‚Ä¢ **New**: `/stprofile` custom_title parameter",
            "‚Ä¢ **Updated**: All admin checks support custom roles",
            "‚Ä¢ **Updated**: Stats cards use antique gold accents (400x750px)",
            "‚Ä¢ **Updated**: Profiles simplified - removed favorite_script and style"
        ]
    },
    {   "version": "1.7.3",
        "title":  "üéôÔ∏è Mute and unmute commands added",
        "features": [
            "‚Ä¢ **New**: `*mute` & `*unmute` commands added!",
            "‚Ä¢ **Updated**: Github repo is now public"
        ]
    },
    {
        "version": "1.7.2",
        "title":  "üíæ Internal Bug Fixes",
        "features": [
            "‚Ä¢ **Fixed**: Bug where the bot wouldn't adjust vc cap due to role hierarchy",
            "‚Ä¢ **Updated**: Reminder to use `/setbotc` when adding capped voice channels to a session",
            "‚Ä¢ **Removed**: `/storytellerstats` replaced in favor of `/ststats` (same functionality)"
        ]
    },
    {   "version": "1.7.1",
        "title": "üêõ Bug squashing",
        "features": [
            "‚Ä¢ **Fixed**: `/stprofile` pronoun saving issue (now persists correctly)",
            "‚Ä¢ **Fixed**: `/ststats` alias recognition (now works as expected)",
            "‚Ä¢ **Fixed**: Auto setup welcome message formatting issue (now displays properly)",
            "‚Ä¢ **Fixed**: `/forceendgame` missing from slash command list"
        ]
    },
    {   "version": "1.7.0",
        "title": "üé® Storyteller Profile Cards Test",
        "features": [
            "‚Ä¢ **New**: `/ststats @user` - Generates custom 800x600px image stat cards",
            "‚Ä¢ **New**: `/stprofile` - Customize your stat card (pronouns, favorite script, style)",
            "‚Ä¢ **Design**: BOTC-themed cards with red/black color scheme and purple accents",
            "‚Ä¢ **Profiles**: Bot-wide profiles (same across all servers)",
            "‚Ä¢ **Renamed**: `/storytellerstats` ‚Üí `/ststats` (old name kept as alias)"
        ]
    },
    {   "version": "1.6.3",
        "title": "üîß Major Bug Fixes & Quality of Life",
        "features": [
            "‚Ä¢ **Fixed**: `*poll` now session-aware - pings players from correct category",
            "‚Ä¢ **Fixed**: `*poll` permission check (ST/Co-ST prefix OR admin)",
            "‚Ä¢ **Fixed**: `*timer` command intercepted by shorthand handler",
            "‚Ä¢ **Fixed**: `/startgame` and `/endgame` no longer send duplicate embeds",
            "‚Ä¢ **Improved**: Stats now fetch ALL games for accuracy (no 10-game limit)",
            "‚Ä¢ **Improved**: Welcome message clarifies category-based architecture"
        ]
    },
    {   "version": "1.6.2",
        "title": "‚è±Ô∏è Timer & Spectator Bug Fixes",
        "features": [
            "‚Ä¢ **Fixed**: Timer cancel command now works correctly",
            "‚Ä¢ **Fixed**: Spectator shadow followers now update properly when using prefix commands"
        ]
    },
    {   "version": "1.6.1",
        "title": "‚ú® Custom Emoji Integration & Bug Fixes",
        "features": [
            "‚Ä¢ **Visual**: Replaced some unicode emojis with custom server emojis (star, scroll, gear, heart, pen, balance, question)",
            "‚Ä¢ **Fixed**: `/gamehistory` duration calculation (was showing 0m for all games)",
            "‚Ä¢ **Fixed**: `/deletegame` now properly updates storyteller stats (averages no longer include deleted games)",
            "‚Ä¢ **Security**: `/deletegame` now validates guild ownership (prevents cross-server deletions)",
            "‚Ä¢ **Improved**: `/gamehistory` embed formatting for better readability"
        ]
    },
    {   "version": "1.6.0",
        "title": "üé® Visual Updates, Game Reminders & Permission Fixes",
        "features": [
            "‚Ä¢ **Long-Running Games**: Interactive confirmation after 2 hours - \"Still Playing\"/\"Game Ended\" buttons",
            "‚Ä¢ **Fixed**: Reminder spam bug. Now tracks reminded games and sends confirmation once",
            "‚Ä¢ **Permissions**: `/endgame` allows any ST/Co-ST in session, warns if registered for different session",
            "‚Ä¢ **New**: `/forceendgame` admin command bypasses all checks",
            "‚Ä¢ **VC Caps**: Snapshot-based system eliminates race conditions",
            "‚Ä¢ **VC Caps**: Nickname changes automatically adjust caps when prefixes added/removed",
            "‚Ä¢ `/gamehistory` and `/deletegame` fixed"
        ]
    },
    {   "version": "1.5.2",
        "title": "üêõ Timer & Owner Permission Fixes",
        "features": [
            "‚Ä¢ **Fixed**: Shorthand timer (`*5m`, `*4:30`) now accepts all duration formats (colon format, combined units)",
            "‚Ä¢ **Fixed**: Timer commands now show proper error messages when no game is active or no session found",
            "‚Ä¢ **Fixed**: Server owner nickname restriction now shows clear message about Discord platform limitation",
            "‚Ä¢ **Improved**: Owner gets special message explaining manual nickname change requirement for prefix commands",
            "‚Ä¢ **Improved**: Permission checks moved before announcements to prevent ST announcement before permission errors",
            "‚Ä¢ Timer error messages now use 5-second display delay for better visibility"
        ]
    },
    {   "version": "1.5.1",
        "title": "üîß Session Architecture Cleanup",
        "features": [
            "‚Ä¢ **BREAKING**: `/setbotc` now creates session entries (no more backward-compatibility auto-creation)",
            "‚Ä¢ **BREAKING**: Removed obsolete guild.botc_category_id auto-session creation logic",
            "‚Ä¢ **Improved**: All session-dependent commands now validate category setup and show clear error messages",
            "‚Ä¢ **Improved**: `/startgame`, `/endgame`, `*call`, `*timer`, `*night`, `*day`, `*consult` now require session",
            "‚Ä¢ **Philosophy**: One-session servers work perfectly - architecture supports both single and multi-session use cases",
            "‚Ä¢ `/setbotc <category>` is now the primary session setup command (explicit over implicit)"
        ]
    },
    {   "version": "1.5.0",
        "title": "üèóÔ∏è Pure Session-Scoped Architecture",
        "features": [
            "‚Ä¢ **BREAKING**: Guild table no longer stores session config (grimoire, channels)",
            "‚Ä¢ **Multi-Session**: Sessions auto-create when config commands used in any category",
            "‚Ä¢ **Multi-Session**: Manual setup supported - create category, run /setbotc to start session",
            "‚Ä¢ **Multi-Session**: Startup announcements sent to each session independently",
            "‚Ä¢ All config commands (*g, /settown, /setexception) are session-scoped",
            "‚Ä¢ Improved recovery: deleted sessions can be recreated by running config commands",
            "‚Ä¢ **New**: *game command - view current session's active game info",
            "‚Ä¢ **Improved**: *sessions now filters deleted categories, sorts by last active"
        ]
    },
    {   "version": "1.4.1",
        "title": "üêõ Bug Fixes & Multi-Session Support",
        "features": [
            "‚Ä¢ **Fixed** `/startgame` duplicate messages, `/endgame` crashes, voice tracking TypeError",
            "‚Ä¢ **Fixed** Session manager parameter issues across multiple commands",
            "‚Ä¢ **Multi-Session**: All config now session-scoped (`*settown`, `*setexception`, `*g`)",
            "‚Ä¢ **Multi-Session**: Game commands detect category from command location",
            "‚Ä¢ Each category has independent Town Square, grimoire, exception channel",
            "‚Ä¢ Run commands from within a category to affect that session only"
        ]
    },
    {   "version": "1.4.0",
        "title": "üìä Storyteller Tools Improvements",
        "features": [
            "‚Ä¢ Added *stguide command for quick access to storyteller resources",
            "‚Ä¢ Interactive /startgame confirmation with roster preview",
            "‚Ä¢ Added /addplayer and /removeplayer commands for manual player management",
            "‚Ä¢ Storyteller now tracks average game length & player count",
            "‚Ä¢ Session-scoped ST validation role checks for multi-session servers",
            "‚Ä¢ Defined ST vs Co-ST roles for clearer stat tracking"
        ]
    },
    {   "version": "1.3.2",
        "title": "üîß Wiki Extraction UX & Timer logic",
        "features": [
            "‚Ä¢ Added a shorthand timer format 'Xm' for minutes only (e.g., '5m' for 5 minutes)",
            "‚Ä¢ Improved wiki extraction logic",
            "‚Ä¢ Added /startgame requirement for timer commands to prevent misuse before game start",
            "‚Ä¢ **Bug Fix**: `/character` navigation buttons now work correctly for all users",
            "‚Ä¢ **Enhancement**: `/storytellerstats @user` now shows bot-wide achievements across all servers",
            "‚Ä¢ **Bug Fix**: Nickname change detection now properly distinguishes bot-initiated changes from manual edits",
            "‚Ä¢ **Bug Fix**: Server owners and high-role users no longer receive false warnings about manual nickname changes"
        ]
    },
    {
        "version": "1.3.1",
        "title": "üîß Character Command Polish",
        "features": [
            "‚Ä¢ `/character` is now case-insensitive (e.g., 'imp', 'IMP', 'Imp' all work)",
            "‚Ä¢ Character icons now display larger (full-width image instead of thumbnail)",
            "‚Ä¢ Improved icon extraction with multiple fallback strategies",
            "‚Ä¢ Icons only appear on Summary page for cleaner navigation"
        ]
    },
    {
        "version": "1.3.0",
        "title": "üìñ Wiki Integration & Bug Fixes",
        "features": [
            "‚Ä¢ `/character <name>` command with full wiki integration and button navigation",
            "‚Ä¢ Interactive sections: Summary, Tips & Tricks, Bluffing, How to Run, Fighting",
            "‚Ä¢ Character icons displayed as thumbnails, team-based color coding",
            "‚Ä¢ Custom scripts now normalized to 'Custom Script' in stats to prevent fragmentation",
            "‚Ä¢ Startup announcements prioritize BOTC channels over guild system channel",
            "‚Ä¢ Fixed embed character limit errors in startup announcements",
            "‚Ä¢ Fixed UnboundLocalError in `*sessions` command",
            "‚Ä¢ Fixed `update_session()` method signature mismatches"
        ]
    },
    {
        "version": "1.2.2",
        "title": "‚ú® Enhanced Stats & Announcement System",
        "features": [
            "‚Ä¢ Hybrid announcements: session-scoped for games, guild system channel for bot updates",
            "‚Ä¢ `/storytellerstats @user` now shows detailed individual stats with profile picture",
            "‚Ä¢ `/stats` enhanced with balance indicators, per-script win rates, and trend analysis",
            "‚Ä¢ Nickname change detection warns users to use bot commands instead of manual edits",
            "‚Ä¢ `*changelog` moved to admin-only to prevent spam",
            "‚Ä¢ Help text fixes: `*consult` and `*join` in correct categories",
            "‚Ä¢ Added 'Manage Messages' permission and updated invite link",
            "‚Ä¢ Consultation channel now appears before Town Square in `/autosetup`"
        ]
    },
    {
        "version": "1.2.1",
        "title": "‚ú® Quality of Life & Polish",
        "features": [
            "‚Ä¢ **New Commands**: `*join @user` (one-time voice channel join), `*consult` (request ST consultation via exception channel)",
            "‚Ä¢ **Improved Help System**: `*help` now shows quick reference, `*help st` for storyteller commands, `*help admin` for setup",
            "‚Ä¢ **Poll Embed Redesign**: Cleaner formatting, removed ASCII art, better readability",
            "‚Ä¢ **Bug Fix**: Prefix commands (`*st`, `*cost`, `*!`, `*brb`) now only show confirmation after successful nickname edit",
            "‚Ä¢ **Bug Fix**: Admin setup commands now properly check permissions before sending any messages",
            "‚Ä¢ Added feature where I talk to myself in the changelog to not go insane"
        ]
    },
    {
        "version": "1.2.0",
        "title": "üé≠ Multi-Session Support",
        "features": [
            "‚Ä¢ **Multi-Session Architecture**: Run multiple concurrent games in different categories on the same server",
            "‚Ä¢ **Session-Scoped Commands**: All commands automatically scope to the category they're used in (grimoire, timers, calls, etc.)",
            "‚Ä¢ **Session-Scoped Game History**: `/gamehistory` auto-detects context - shows session history in BOTC categories, server-wide elsewhere",
            "‚Ä¢ **Enhanced Session Management**: `*sessions` lists all active sessions, `*sessions <id>` shows detailed info, `*sessions cleanup` removes old sessions",
            "‚Ä¢ **Automatic Session Cleanup**: Background task removes inactive sessions every 24 hours (30+ days old)",
            "‚Ä¢ **Backward Compatible**: Single-category servers work exactly as before with zero changes required",
            "‚Ä¢ Database migrations: Added category_id to timers and games tables for session isolation",
            "‚Ä¢ Does anybody read these?"
        ]
    },
    {
        "version": "1.1.0",
        "title": "üèóÔ∏è Major Architecture Refactor & Critical Bug Fixes",
        "features": [
            "‚Ä¢ **Architecture**: Moved all commands to dedicated Commands cog (reduced main.py by 655 lines / 25%)",
            "‚Ä¢ **Bug Fix**: *players now tracks by user ID instead of nicknames (fixes player tracking across nickname changes)",
            "‚Ä¢ **Bug Fix**: Voice channel capping now works correctly when using prefix commands (*st, *cost, *!) in capped channels",
            "‚Ä¢ Added recalculate_channel_cap() function to robustly handle VC limit adjustments after nickname changes",
            "‚Ä¢ Player tracking now immune to nickname changes - /startgame stores user IDs, *players compares by ID",
            "‚Ä¢ Delayed public release to ensure stability (sorry Tom </3)"
        ]
    },
    {
        "version": "1.0.1",
        "title": "üêõ Bug Fixes & Visual Polish",
        "features": [
            "‚Ä¢ Fixed /startgame showing wrong storyteller (variable collision bug)",
            "‚Ä¢ Fixed *spec not immediately moving spectators to target's voice channel",
            "‚Ä¢ All embeds now use custom server emojis (town square, script, players, good/evil, etc.)",
            "‚Ä¢ Enhanced /startgame and /endgame embeds with better layouts and timestamps",
            "‚Ä¢ Added official BOTC wiki thumbnails for Good/Evil team wins",
            "‚Ä¢ Improved embed visual hierarchy with bold headers and lighter values"
        ]
    },
    {
        "version": "1.0.0",
        "title": "üéâ Public Release",
        "features": [
            "‚Ä¢ First public release! Made by one person who plays too much BOTC.",
            "‚Ä¢ Fixed timer permissions bug that would crash when storytellers tried to set timers",
            "‚Ä¢ Cleaned up credential handling for self-hosting",
            "‚Ä¢ Added proper setup docs",
            "‚Ä¢ `/autosetup` command creates gothic-themed server structure",
            "‚Ä¢ Game tracking with stats and history",
            "‚Ä¢ Timers that persist through restarts",
            "‚Ä¢ Shadow follower system for spectators",
            "‚Ä¢ Voice channel management",
            "‚Ä¢ Script polling",
            "‚Ä¢ Gothic-themed embeds because why not"
        ]
    },
    {
        "version": "0.9.0",
        "title": "üöÄ Enhanced onboarding experience for new servers",
        "features": [
            "‚Ä¢ `/autosetup` command for one-click server configuration with gothic-themed channels",
            "‚Ä¢ Welcome message sent to first accessible text channel upon joining a new server",
            "‚Ä¢ Detailed setup instructions and next steps included in welcome message",
            "‚Ä¢ Improved error handling and permission checks during autosetup",
            "‚Ä¢ Updated documentation to reflect new onboarding features"
        ]
    },
    {
        "version": "0.8.5",
        "title": "üêõ Bug Fixes & Code Cleanup",
        "features": [
            "‚Ä¢ Fixed missing /stats and /gamehistory handlers that caused commands to fail",
            "‚Ä¢ Removed duplicate import statements and dead code",
            "‚Ä¢ Fixed import order issues for better code organization",
            "‚Ä¢ Removed external debug code that referenced non-existent paths",
            "‚Ä¢ Improved code quality and maintainability"
        ]
    },
    {
        "version": "0.8.4",
        "title": "üé≤ Endgame Message Variety & Polish",
        "features": [
            "‚Ä¢ Endgame messages for Good and Evil are now randomly selected from a set of flavorful, dramatic, and playful options!",
            "‚Ä¢ Improved formatting for all /endgame results.",
            "‚Ä¢ Minor bug fixes and code cleanup."
        ]
    },
    {
        "version": "0.8.3",
        "title": "üêû Minor Bug Fixes and Improvements",
        "features": [
            "‚Ä¢ Fixed an issue where the bot could crash when moving members under certain conditions.",
            "‚Ä¢ I did something else but honestly I forgot what it was."
        ]
    },
    {
        "version": "0.8.2",
        "title": "‚öôÔ∏è Call & Timer improvements",
        "features": [
            "Timers now cancel any previous timer for the same server",
            "Call only moves members not already in Town Square (avoids redundant moves)",
            "Fixed command message deletion helper to avoid duplicate nested defs",
            "Changed version formatting for private releases",
            "Added exception voice channel feature for call operations"
        ]
    },
    {
        "version": "0.8.1",
        "title": "üóëÔ∏è Game History Management",
        "features": [
            "`/deletegame <number>` - Delete a specific game from history (Admin)",
            "`/clearhistory` - Clear all game history with confirmation (Admin)",
            "Updated help command with new admin commands"
        ]
    },
    {
        "version": "0.8.0",
        "title": "üìä Game Statistics Tracking",
        "features": [
            "`/startgame` - Start tracking a new game session",
            "`/endgame` - Record game winner (Good/Evil)",
            "`/stats` - View server-wide win rates and statistics",
            "`/gamehistory` - View recent games played",
            "Server-level stats only (no individual player tracking)"
        ]
    },
    {
        "version": "0.7.5",
        "title": "üêõ Some bug squashing",
        "features": [
            "Fixed prefix matching bugs that could match unintended nicknames",
            "Fixed voice channel cap state not saving after decrements",
            "Fixed race condition in voice channel cap management",
            "Added rollback on failed channel edits"
        ]
    },
    {
        "version": "0.7.4",
        "title": "üêõ Bug Fixes & Performance Improvements",
        "features": [
            "Fixed voice channel caps drifting when privileged users switch channels",
            "Fixed voice channel caps not persisting across bot restarts",
            "Parallel player moves - timer calls now ~10x faster",
            "Improved prefix matching for storyteller roles"
        ]
    },
    {
        "version": "0.7.3",
        "title": "üìä Slash Command & Poll Improvements",
        "features": [
            "`/poll` slash command added (same as `*poll`)",
            "Poll creation now pings all active players",
            "Poll results only ping the poll creator",
            "Active Developer Badge support"
        ]
    },
    {
        "version": "0.7.2",
        "title": "‚è∞ Timed Polls",
        "features": [
            "Polls auto-end after 5 minutes and announce winner",
            "Set custom timer with `*poll [123ch] <time>`",
            "Results mention all active players",
            "Better poll formatting"
        ]
    },
    {
        "version": "0.7.1",
        "title": "üé® Poll Formatting",
        "features": [
            "Better poll header formatting",
            "Shows poll creator name and avatar"
        ]
    },
    {
        "version": "0.7.0",
        "title": "üìú Script Polling",
        "features": [
            "`*poll [123ch]` command for script voting",
            "Supports all base scripts plus Custom and Homebrew",
            "Auto-adds emoji reactions"
        ]
    },
    {
        "version": "0.6.0",
        "title": "üöÄ Public Release",
        "features": [
            "Rebranded as Grimkeeper",
            "`*night` and `*day` announcement commands",
            "Documentation and GitHub setup",
            "MIT license"
        ]
    },
    {
        "version": "0.5.9",
        "title": "üîí Production Readiness",
        "features": [
            "Timer persistence across restarts",
            "Rate limiting (2s cooldown)",
            "Admin-only `*config` command",
            "Better error handling and logging"
        ]
    },
    {
        "version": "0.5.8",
        "title": "üêõ Bug Fixes",
        "features": [
            "Fixed duplicate imports",
            "Fixed requirements.txt package name",
            "Added voice state check for shadow followers"
        ]
    },
    {
        "version": "0.5.7",
        "title": "üßπ Code Quality",
        "features": [
            "Extracted prefix strings to constants",
            "Added permission checks",
            "Handle large player lists"
        ]
    },
    {
        "version": "0.5.6",
        "title": "üë• Player Tracking",
        "features": [
            "`*players` shows who joined/left since last check"
        ]
    },
    {
        "version": "0.5.5",
        "title": "üîß Bug Fix",
        "features": [
            "Fixed voice channel caps to increase immediately when privileged users join (not just when full)",
            "Improved cap tracking to stack properly when multiple privileged users join/leave the same channel"
        ]
    },
    {
        "version": "0.5.4",
        "title": "üì¢ Startup Announcements",
        "features": [
            "Bot posts changelog on startup to configured channels (deprecated feature)"
        ]
    },
    {
        "version": "0.5.3",
        "title": "‚ú® UI Improvements",
        "features": [
            "Reorganized `*help` command with clearer role-based sections",
            "Separated admin commands into dedicated 'Admin Setup' section",
            "Moved commonly-used commands to 'Everyone' section at the top",
            "Improved help descriptions and formatting for better readability"
        ]
    },
    {
        "version": "0.5.2",
        "title": "üîß Terminology Fix",
        "features": [
            "Renamed `*town` to `*players` for accurate terminology (shows all players, not just Townsfolk alignment)",
            "Updated embed title and descriptions to reflect 'Active Players' instead of 'Townsfolk'"
        ]
    },
    {
        "version": "0.5.1",
        "title": "üêõ Bug Fixes & Improvements",
        "features": [
            "Fixed voice channel caps to increase immediately when privileged users join (not just when full)",
            "Improved cap tracking to stack properly when multiple privileged users join/leave the same channel"
        ]
    },
    {
        "version": "0.5.0",
        "title": "‚ú® Timer & Voice Channel Management",
        "features": [
            "Timer System: Schedule townspeople calls with `*timer <duration>` (supports flexible formats: `5m`, `1h30m`, `1:30`, etc.)",
            "Timer Status: Check remaining time with bare `*timer` command (public visibility)",
            "Timer Cancellation: Cancel timers with `*timer cancel` (ST/Co-ST only)",
            "Discord Timestamps: Timer end times now display in each user's local timezone using Discord markup",
            "Channel Cap Management: Auto-increase voice channel limit when Storytellers/Co-Storytellers/Spectators join capped channels",
            "Cap Reset: Automatically reset channel cap to original limit when privileged user leaves",
            "Persistent Timer Messages: Timer announcement stays visible until completion or cancellation",
            "Call Timer Integration: `*call` command now cancels any active timer before executing"
        ]
    },
    {
        "version": "0.4.0",
        "title": "üèõÔ∏è Townspeople Management",
        "features": [
            "Town Square System: Admins set a destination channel with `*settown #channel`",
            "BOTC Category Config: Admins configure BOTC category with `*setbotc <name|id>`",
            "Call Command: Storytellers call all townspeople to Town Square with `*call`",
            "Player List: View active player count and names with `*players` command"
        ]
    },
    {
        "version": "0.3.0",
        "title": "üåò Shadow System & DND",
        "features": [
            "Shadow Follow: Spectators follow others with `*spec @user`",
            "Unfollow: Stop following with `*unspec`",
            "Shadow View: See all followers with `*shadows`",
            "DND Mode: Toggle Do-Not-Disturb with `*dnd` to prevent being followed"
        ]
    },
    {
        "version": "0.2.0",
        "title": "üìú Grimoire & Prefixes",
        "features": [
            "Grimoire Links: Storytellers set/view grimoire with `*g <link>`",
            "Role Prefixes: Toggle roles with `*!` (spectator), `*st` (storyteller), `*cost` (co-storyteller), `*brb` (away)"
        ]
    }
]
